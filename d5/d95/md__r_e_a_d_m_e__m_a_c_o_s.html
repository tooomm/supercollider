<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>SuperCollider: SuperCollider 3.8 for macOS (OS X)</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../sc_cube_48x48.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">SuperCollider
   &#160;<span id="projectnumber">3.9.0</span>
   </div>
   <div id="projectbrief">Audio server, programming language, and IDE for sound and composition</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SuperCollider 3.8 for macOS (OS X) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>These are installation and build instructions for the macOS version of James McCartney's SuperCollider synthesis engine (scsynth) and programming language (sclang).</p>
<p>Pre-compiled releases are available for download at:</p>
<p><a href="https://github.com/SuperCollider/SuperCollider/releases">https://github.com/SuperCollider/SuperCollider/releases</a></p>
<h2>Table of contents </h2>
<ul>
<li>Prerequisites</li>
<li>Obtaining the source code</li>
<li>Build instructions</li>
<li>Diagnosing build problems</li>
<li>Frequently used cmake settings</li>
<li>Using cmake with Xcode or QtCreator</li>
<li>Building without Qt or the IDE</li>
<li>sclang and scynth executables</li>
</ul>
<h2>Executables </h2>
<p><code>SuperCollider.app</code> is the IDE (integrated development environment) for writing and executing SuperCollider code.</p>
<p>Inside that application's folder (<code>SuperCollider.app/Contents/MacOS/</code>) are the two executables that make up supercollider itself:</p>
<p><code>sclang</code> - the language interpreter including Qt gui <code>scsynth</code> - the audio engine</p>
<h2>Prerequisites: </h2>
<ul>
<li><b>Xcode</b> can be installed free from the Apple App Store or downloaded from: <a href="http://developer.apple.com">http://developer.apple.com</a><ul>
<li>Xcode 5 may work</li>
<li>Xcode 6 is known to work - it requires a Mac running macOS version 10.9.4 or later or 10.10</li>
<li>Later versions should definitely work</li>
</ul>
</li>
<li><b>Xcode command line tools</b> must be installed - after installing Xcode, this can be done from the Xcode preferences or from the command line: <code>xcode-select --install</code></li>
<li><b>homebrew</b> is recommended to install required libraries See <a href="http://brew.sh">http://brew.sh</a> for installation instructions.</li>
<li><p class="startli"><b>git, cmake, libsndfile, readline, and qt5.5</b>, installed via homebrew: <code>brew install git cmake readline qt55</code></p>
<p class="startli"><em>Note</em>: As of this writing the latest stable Qt is version 5.8. SC depends on Qt5WebKit, which was dropped from the binary distributions of Qt since version 5.6 (functionally replaced by Qt5WebEngine). Therefore you cannot simply install the latest Qt5 via homebrew and rely on the defaults. You can either install qt55 (accessed at /usr/local/opt/qt@55) and replace <code>brew --prefix qt5</code> by <code>brew --prefix qt55</code> in the build instructions below, or install the current Qt version with the option <code>--with-qtwebkit</code>. As this is a non-standard install, brew will build qt5 locally (go drink a coffee). If you already had Qt5, and and your build broke after an update, or if you need several Qt5 installs, you can set the version to be used by default with <code>brew switch</code>. (for example <code>brew switch qt5 5.5.1_2</code>, you can also "freeze" the Qt5 version with <code>brew pin</code>).</p>
</li>
</ul>
<h2>Obtaining the source code </h2>
<p><b>Note</b> Please do not use non-ASCII characters (above code point 127) in your SuperCollider program path (i.e. the names of the folders containing SuperCollider). Doing so will break options to open class or method files.</p>
<p>SC is on Github: <a href="https://github.com/SuperCollider/SuperCollider">https://github.com/SuperCollider/SuperCollider</a></p>
<p>Get a copy of the source code: </p>
<pre class="fragment">git clone --recursive https://github.com/SuperCollider/SuperCollider.git
</pre><p><code>--recursive</code> specifies that it should also clone the git submodules.</p>
<h2>Build instructions </h2>
<pre class="fragment">cd SuperCollider
mkdir -p build
cd build
cmake -G Xcode -DCMAKE_PREFIX_PATH=`brew --prefix qt5`  ..
cmake --build . --target install --config RelWithDebInfo
</pre><p>If successful this will build the application into <code>build/Install/SuperCollider/</code></p>
<p>You can see the available build options with <code>cmake -LH</code>.</p>
<p>To install, you may move this to /Applications or use it in place from the build directory.</p>
<p><b>Note</b>: You can also open the produced SuperCollider.xcodeproj in Xcode, and build the "Install" scheme in place of the last step. Do make sure you run the previous configuration steps.</p>
<h4>Step by step explanation of the Build instructions:</h4>
<h5>Create a <code>build</code> folder if one doesn't already exist:</h5>
<pre class="fragment">mkdir -p build
cd build
</pre><h5>Prepare for building by making a configuration file:</h5>
<pre class="fragment">cmake -G Xcode -DCMAKE_PREFIX_PATH=`brew --prefix qt5`  ..
</pre><p>(The <code>..</code> at the end is easy to miss. Don't forget it!)</p>
<p>This specifies to cmake that we will be using Xcode to build. It also specifies the location of qt so that the complier/linker can find it (note that you might have to set <code>qt55</code> instead of <code>qt5</code>, depending on how you installed you qt5 version (see above, "Prerequisites")). <code>brew --prefix qt5</code> will be expanded to the path to current Qt5 when the command is run.</p>
<p>If you are not using the Homebrew install then you should substitute the path to the parent folder of the bin/include/lib folders in that Qt tree.</p>
<h5>Build</h5>
<pre class="fragment">cmake --build . --target install --config RelWithDebInfo
</pre><p>Cmake will build the application looking up configuration information in the file <code>CMakeCache.txt</code> in the specified directory (the current directory: <code>.</code> ). By specifying '&ndash;target install' you build all targets and trigger the creation of a portable bundle containing all files contained in the SC distribution. The default install location is <code>./Install</code>.</p>
<p>The flag <code>--config RelWithDebInfo</code> will build an optimized binary but will still include some useful debug information.</p>
<p>By default Xcode builds the application in debug mode which runs much slower and has a larger application size. It is intended for use with the XCode debugger. For normal usage you will want an optimized release version.</p>
<p>The four possible build configs are:</p>
<ul>
<li>Debug</li>
<li>RelWithDebInfo</li>
<li>Release</li>
<li>MinSizeRel</li>
</ul>
<h2>Diagnosing Build Problems </h2>
<p>The most common build problems are related to incorrect versions of the core dependencies, or dirty states in your build folder.</p>
<h3>Checking component versions:</h3>
<p><b>Xcode</b>: <code>xcodebuild -version</code>, or the "About" dialog of the Xcode application. Any build from the 6.x series or greater should generally work.</p>
<p><b>cmake, qt5(.5.x), libsndfile, readline</b>: <code>brew info ____</code> will show you what you have installed - for example, <code>brew info qt5</code> should show you the Qt5 version information. A build using v5.6 and above will fail at the time of this writing because Qt5WebKit is missing in its binary distribution.</p>
<p><code>brew upgrade ____</code> will update the dependency to a newer version (avoid this for Qt5 or handle different Qt5 versions with <code>brew switch</code>).</p>
<p>Other common homebrew problems can be fixed using <code>brew doctor</code>.</p>
<h3>Dirty build states</h3>
<p>While it's generally safe to re-use your build folder, changing branches, build tools, cmake settings, or the versions of your dependencies can sometimes put you in a state where you can no longer build. The solution is to clean your build folder - the common ways to do this, in order of severity:</p>
<ol type="1">
<li><code>rm CMakeCache.txt</code> (delete your cmake settings for that build)</li>
<li><code>xcodebuild clean --target install</code> or <code>make clean</code> (clean your intermediate build files)</li>
<li><code>rm -r ./Install</code> (delete the output of your build)</li>
<li><code>cd ..; rm -r ./build</code> (delete your entire build folder)</li>
</ol>
<p>Removing the CMakeCache.txt should fix most build problems. After running each one of these, you must re-run the two cmake commands shown in the build instructions above (configure and rebuild).</p>
<p>If you wish to build multiple git branches you should usually create a new build folder for each branch you're building. In practice, though, you can usually switch between similar branches and rebuild by simply deleting your CMakeCache.txt.</p>
<h3>Travis continuous integration</h3>
<p>The code on github is tested anytime a contributor pushes new changes, so if a mistake was made in the cutting edge development version and something is broken, then you should be able to see this by visiting the Travis status page:</p>
<p><a href="https://travis-ci.org/supercollider/supercollider">https://travis-ci.org/supercollider/supercollider</a></p>
<p>If the latest build status is failing, then you can switch your local copy to a previous commit that is still working (until the developers get a chance to fix the problem):</p>
<ul>
<li>locate the most recent green build on the travis,</li>
<li>find it's git commit id (e.g. <code>595b956</code>), and</li>
<li>check out that change in git: <code>git checkout 595b956</code></li>
<li>build</li>
</ul>
<h3>If all else fails</h3>
<p>Post to the user list stating what git hash you have checked out and all xcode version and library information and most importantly the error messages.</p>
<p>Simply posting "the latest checkout is broken" won't help. We need the exact compile error message.</p>
<h2>Frequently used cmake settings </h2>
<p>There are more settings in the build configuration you may want to adjust. In order to see a useful list of your options, you can run: </p>
<pre class="fragment">cmake -L ..
</pre><p>This configures the build using default settings or settings stored in the file build/CMakeCache.txt, prints explanatory return statements and produces a list of variables the value of which you might want to change.</p>
<p>In order to see all the command line options <code>cmake</code> offers, type: </p>
<pre class="fragment">cmake --help
</pre><p>It is not necessary to pass in all required arguments each time you run cmake, as cmake caches previously set arguments in the file CMakeCache.txt. This is helpful, but also something to keep in mind if unexpected things happen.</p>
<p>If you feel uncomfortable with the command line, you might want to try cmake frontends like <code>ccmake</code> or <code>cmake-gui</code>. You can also configure your build by manually editing build/CMakeCache.txt.</p>
<p>Common arguments to control the build configuration are:</p>
<ul>
<li><p class="startli">Control the location where SC gets installed. The following line moves it to the Applications folder (which means you need to use <code>sudo</code>):</p>
<p class="startli"><code>-DCMAKE_INSTALL_PREFIX=/Applications</code></p>
</li>
<li><p class="startli">Enable compiler optimizations for your local system</p>
<p class="startli"><code>-DNATIVE=ON</code></p>
</li>
<li><p class="startli">Build the <em>supernova</em> server:</p>
<p class="startli"><code>-DSUPERNOVA=ON</code></p>
<p class="startli">Using supernova requires the <code>portaudio</code> audio backend, so you need to install it (Homebrew and MacPorts both provide packages).</p>
<p class="startli"><em>Note</em>: When you build with supernova, an alternative server executable and a supernova version of each plugin is built. If you also use the sc3-plugins package, make sure to compile them with supernova support too.</p>
<p class="startli">Within SC you will be able to switch between scsynth and supernova by evaluating one of:</p>
<p class="startli"><code>Server.supernova</code> <code>Server.scsynth</code></p>
<p class="startli">Check sc help for <code>ParGroup</code> to see how to make use of multi-core hardware.</p>
</li>
<li><p class="startli">Build a 32-bit version (sc 3.6 only):</p>
<p class="startli"><code>-DCMAKE_OSX_ARCHITECTURES='i386'</code></p>
<p class="startli">or combine a 32- and 64-bit version into a bundle (i.e. build a universal binary). This is only possible up until macOS 10.6 and requires the dependencies (Qtlibs &amp; readline) to be universal builds too:</p>
<p class="startli"><code>-DCMAKE_OSX_ARCHITECTURES='i386;x86_64'</code></p>
</li>
<li><p class="startli">Homebrew installations of libsndfile should be detected automatically. To link to a version of libsndfile that is not installed in /usr/local/include|lib, you can use:</p>
<p class="startli">`-DSNDFILE_INCLUDE_DIR='/path/to/libsndfile/include'<code> </code>-DSNDFILE_LIBRARY='/path/to/libsndfile/lib/libreadline.dylib'`</p>
</li>
<li><p class="startli">Normally, homebrew installations of readline are detected automatically, and building with readline is only required if you plan to use SuperCollider from the terminal. To link to a non-standard version of readline, you can use:</p>
<p class="startli">`-DREADLINE_INCLUDE_DIR='/path/to/readline/include'<code> </code>-DREADLINE_LIBRARY='/path/to/readline/lib/libreadline.dylib'`</p>
</li>
</ul>
<h2>Using cmake with Xcode or QtCreator </h2>
<p>Xcode projects are generated by appending: <code>-G Xcode</code>. The build instructions above use the Xcode toolchain, which is well-tested and generally recommended if you're planning to debug or hack on SC.</p>
<p>You may also want to make the expected SDK-Version and location explicit, using:</p>
<p><code>-DCMAKE_OSX_SYSROOT=</code></p>
<p>This is often useful to point to an older SDK even with a newer Xcode installed. These are generally located in the</p>
<p><code>/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs</code></p>
<p>of an Xcode.app package.</p>
<p>You can build without using XCode using <code>make</code>, by omitting the <code>-G Xcode</code> - in this case, your build command is <code>make</code> rather than <code>xcodebuild</code></p>
<p>Qt Creator has very good <code>cmake</code> integration and can build <code>cmake</code> projects without requiring a <code>cmake</code> generated project file. If you have Qt5 via homebrew installed, you can install Qt Creator by running: </p>
<pre class="fragment">brew linkapps qt5
</pre><h2>Building without Qt or the IDE </h2>
<p>The Qt framework is used for the SC-IDE, and to provide a graphical toolkit for the sclang language interpreter for users to build their own GUIs.</p>
<p>The 3.8 release does not currently support building on macOS without also building the IDE. It is also not currently possible to build sclang without Qt.</p>
<p>This should be fixed at some point (its a build tool configuration issue). Until then these build flags do not work on macOS:</p>
<p><code>-DSC_IDE=OFF</code></p>
<p><code>-DSC_QT=OFF</code></p>
<p>They do however work on Linux and Windows.</p>
<h2>sclang and scynth executables </h2>
<p>The executables <code>sclang</code>, <code>scsynth</code> and (if available) <code>supernova</code> are inside the application bundle:</p>
<p><code>SuperCollider.app/Contents/MacOS/sclang</code> <code>SuperCollider.app/Contents/Resources/scsynth</code> <code>SuperCollider.app/Contents/Resources/supernova</code></p>
<p>The SuperCollider class library and help files are in:</p>
<p><code>SuperCollider.app/Contents/Resources</code></p>
<p>In previous versions of SuperCollider these resources lived in the top folder next to SuperCollider.app. To make a standard self-contained app bundle with correct library linking, these have now been moved into the app bundle.</p>
<p>If you need to access them from the Finder, ctrl-click SuperCollider.app and choose "Show package contents" from the context menu.</p>
<p>To access them in the Terminal: </p>
<pre class="fragment">cd /path/to/SuperCollider.app/Contents/Resources
</pre><p>or </p>
<pre class="fragment">cd /path/to/SuperCollider.app/Contents/MacOS
</pre><h5>Adding scsynth and sclang to your path</h5>
<p>To have <code>sclang</code> and <code>scsynth</code> available system-wide, you can create shell scripts and put them somewhere that is in your PATH (eg. <code>/usr/local/bin</code> or <code>~/bin</code>)</p>
<p>For <code>sclang</code>: </p>
<pre class="fragment">#!/bin/sh
cd /full/path/to/SuperCollider.app/Contents/MacOS
exec ./sclang $*
</pre><p>And for <code>scsynth</code>: </p>
<pre class="fragment">#!/bin/sh
cd /full/path/to/SuperCollider.app/Contents/Resources
export SC_PLUGIN_PATH="/full/path/to/SuperCollider.app/Resources/plugins/";
exec ./scsynth $*
</pre><h6>Why not just symlink them ?</h6>
<ul>
<li>If you have Qt installed system-wide, sclang will load those as well as the Qt frameworks included in the application bundle. It will then fail with an error message like:</li>
</ul>
<blockquote class="doxtable">
<p>You might be loading two sets of Qt binaries into the same process. Check that all plugins are compiled against the right Qt binaries. Export DYLD_PRINT_LIBRARIES=1 and check that only one set of binaries are being loaded.</p>
<p></p>
</blockquote>
<p>This application failed to start because it could not find or load the Qt platform plugin "cocoa".</p>
<ul>
<li>scsynth will not find the included "plugins", unless given explicitly with the -U commandline flag or using the SC_PLUGIN_PATH environment variable as shown above. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
